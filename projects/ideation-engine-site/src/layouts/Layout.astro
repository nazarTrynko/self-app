---
import '../styles/global.css';

interface Props {
  title?: string;
  description?: string;
}

const { 
  title = 'Ideation Engine v3.0 — Ideas Worth Building',
  description = 'The ultimate product ideation framework. Filter ruthlessly. Ship fast. Build what matters.'
} = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet" />
    
    <!-- Title -->
    <title>{title}</title>
    
    <!-- Open Graph -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    
    <!-- Theme color -->
    <meta name="theme-color" content="#0a0a0a" />
  </head>
  
  <body class="min-h-screen overflow-x-hidden">
    <!-- Progress bar at top -->
    <div 
      id="reading-progress" 
      class="fixed top-0 left-0 h-0.5 bg-gradient-to-r from-[var(--color-fire)] to-[var(--color-burn)] z-50 transition-all duration-150"
      style="width: 0%"
    ></div>
    
    <!-- Main content -->
    <main>
      <slot />
    </main>
    
    <!-- Footer -->
    <footer class="py-12 border-t border-[var(--color-border)]">
      <div class="container-content text-center">
        <p class="text-[var(--color-text-muted)] text-sm">
          <span class="text-gradient-fire font-semibold">Ideation Engine v3.0</span>
          <span class="mx-2">—</span>
          Part of <a href="#" class="hover:text-[var(--color-gold)]">SELF: Synthetic Emergent Learning Framework</a>
        </p>
        <p class="mt-4 text-[var(--color-text-dim)] text-xs">
          Filter ruthlessly. Ship fast. Build what matters.
        </p>
      </div>
    </footer>
    
    <!-- Reading progress script -->
    <script>
      const progressBar = document.getElementById('reading-progress');
      
      function updateProgress() {
        const scrollTop = window.scrollY;
        const docHeight = document.documentElement.scrollHeight - window.innerHeight;
        const progress = (scrollTop / docHeight) * 100;
        if (progressBar) {
          progressBar.style.width = `${Math.min(progress, 100)}%`;
        }
      }
      
      window.addEventListener('scroll', updateProgress, { passive: true });
      updateProgress();
    </script>
    
    <!-- Scroll animation observer -->
    <script>
      const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.1
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            // Optional: unobserve after first animation
            // observer.unobserve(entry.target);
          }
        });
      }, observerOptions);
      
      // Observe all elements with animate-on-scroll class
      document.querySelectorAll('.animate-on-scroll').forEach(el => {
        observer.observe(el);
      });
    </script>
  </body>
</html>

<style is:global>
  /* Scroll animation states */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1),
                transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  .animate-on-scroll.is-visible {
    opacity: 1;
    transform: translateY(0);
  }
  
  /* Staggered animation delays */
  .animate-on-scroll:nth-child(1) { transition-delay: 0ms; }
  .animate-on-scroll:nth-child(2) { transition-delay: 100ms; }
  .animate-on-scroll:nth-child(3) { transition-delay: 200ms; }
  .animate-on-scroll:nth-child(4) { transition-delay: 300ms; }
  .animate-on-scroll:nth-child(5) { transition-delay: 400ms; }
  .animate-on-scroll:nth-child(6) { transition-delay: 500ms; }
</style>

